# RagDocMan - æ™ºèƒ½çŸ¥è¯†åº“ç®¡ç†ä¸ RAG å¢å¼ºç³»ç»Ÿ

![RAG å¢å¼ºæ¶æ„](images/RAGå¢å¼ºå¦‚ä½•å®ç°.png)

> **ä¸€å¥è¯ç®¡ç†æ–‡æ¡£åº“** - é€šè¿‡è‡ªç„¶è¯­è¨€æŒ‡ä»¤å®Œæˆæ‰€æœ‰æ–‡æ¡£ç®¡ç†æ“ä½œï¼Œæ— éœ€å­¦ä¹ å¤æ‚ç•Œé¢å’Œå‘½ä»¤ã€‚

## é¡¹ç›®æ„æƒ³

RagDocMan æ˜¯ä¸€ä¸ªåŸºäºé«˜çº§ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æŠ€æœ¯çš„æ™ºèƒ½çŸ¥è¯†åº“ç®¡ç†ç³»ç»Ÿã€‚å®ƒå…è®¸ç”¨æˆ·é€šè¿‡è‡ªç„¶è¯­è¨€å¯¹è¯æ¥ç®¡ç†æ–‡æ¡£åº“ï¼Œå®ç°"æ‰€è¯´å³æ‰€å¾—"çš„æ“ä½œä½“éªŒã€‚

### æ ¸å¿ƒç†å¿µ

- **è‡ªç„¶è¯­è¨€äº¤äº’**ï¼šç”¨æˆ·é€šè¿‡å¯¹è¯å³å¯å®ŒæˆçŸ¥è¯†åº“åˆ›å»ºã€æ–‡æ¡£ä¸Šä¼ ã€æ™ºèƒ½æ£€ç´¢ç­‰æ“ä½œ
- **é«˜çº§ RAG æŠ€æœ¯æ ˆ**ï¼šæ··åˆæ£€ç´¢ã€é‡æ’åºã€æŸ¥è¯¢æ”¹å†™ç­‰å¤šé˜¶æ®µæ£€ç´¢å¢å¼º
- **å¤šæ¨¡å‹æ”¯æŒ**ï¼šæ”¯æŒ OpenAIã€Anthropicã€DeepSeek ç­‰å¤šä¸ª LLM æœåŠ¡å•†
- **éšç§ä¿æŠ¤**ï¼šæ”¯æŒæœ¬åœ°æ¨¡å‹éƒ¨ç½²ï¼Œæ•°æ®å®Œå…¨å¯æ§

---

## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒä¾èµ–

- **RAG æ¡†æ¶**ï¼šLangChain
- **å‘é‡æ•°æ®åº“**ï¼šChromaDB
- **å‘é‡æ£€ç´¢**ï¼šFAISS
- **å…³é”®è¯æ£€ç´¢**ï¼šrank-bm25
- **é‡æ’åº**ï¼šsentence-transformers (CrossEncoder)
- **æ–‡æ¡£è§£æ**ï¼špython-docx, pypdf, markdown, unstructured
- **æµ‹è¯•æ¡†æ¶**ï¼špytest, pytest-asyncio, pytest-cov

---

## æ ¸å¿ƒåŠŸèƒ½

### 1. å¤šçŸ¥è¯†åº“éš”ç¦»æ¶æ„
- æ¯ä¸ªçŸ¥è¯†åº“ç‹¬ç«‹å‘é‡ç´¢å¼•ï¼ˆChromaDB collectionï¼‰
- æ–‡æ¡£ä¸Šä¼ å¼ºåˆ¶ç»‘å®šçŸ¥è¯†åº“ ID å…ƒæ•°æ®
- æ”¯æŒå…¨å±€æœç´¢ä¸æŒ‡å®šåº“æ£€ç´¢åŒæ¨¡å¼

### 2. é«˜çº§ RAG æŠ€æœ¯æ ˆ
- **é€’å½’è¯­ä¹‰åˆ†å—**ï¼šRecursiveCharacterTextSplitter ç»“åˆè¯­ä¹‰è¾¹ç•Œ
- **æ··åˆæ£€ç´¢**ï¼šBM25 + å‘é‡ç›¸ä¼¼åº¦èåˆæ£€ç´¢
- **Cross-Encoder é‡æ’åº**ï¼šå¯¹æ£€ç´¢ç»“æœäºŒæ¬¡æ’åº
- **æŸ¥è¯¢æ”¹å†™**ï¼šHyDEï¼ˆå‡è®¾æ–‡æ¡£åµŒå…¥ï¼‰å’Œ Query Expansion
- **å¤šé˜¶æ®µæ£€ç´¢**ï¼šå¤æ‚é—®é¢˜è‡ªåŠ¨åˆ†è§£ä¸ºå­é—®é¢˜
- **Top-k åŠ¨æ€æ§åˆ¶**ï¼šæ ¹æ®é—®é¢˜å¤æ‚åº¦åŠ¨æ€è°ƒæ•´

### 3. æ„å›¾è¯†åˆ«å¼•æ“
- æ“ä½œæ„å›¾åˆ†ç±»ï¼šæŸ¥è¯¢/ç®¡ç†/æ›´æ–°/åˆ é™¤
- å®ä½“æŠ½å–ï¼šçŸ¥è¯†åº“åç§°ã€æ–‡æ¡£ç±»å‹ã€æ—¶é—´èŒƒå›´
- æ§½ä½å¡«å……ï¼šè‡ªåŠ¨è¡¥å…¨æ¨¡ç³ŠæŒ‡ä»¤

### 4. ä¸€å¥è¯æ“ä½œç¤ºä¾‹

#### çŸ¥è¯†åº“ç®¡ç†
```
"åˆ›å»ºä¸€ä¸ªå«'äº§å“æ–‡æ¡£'çš„çŸ¥è¯†åº“" â†’ è‡ªåŠ¨åˆ›å»ºç‹¬ç«‹å‘é‡ç©ºé—´
"æŠŠæŠ€æœ¯æ–‡æ¡£åº“åˆå¹¶åˆ°äº§å“åº“" â†’ æ™ºèƒ½å»é‡åˆå¹¶
"åˆ é™¤ 3 ä¸ªæœˆæ²¡ç”¨çš„æµ‹è¯•åº“" â†’ è‡ªåŠ¨è¯†åˆ«å¹¶æ¸…ç†
```

#### æ–‡æ¡£æ“ä½œ
```
"æŠŠè¿™ 10 ä»½ PDF åŠ åˆ°æ³•åŠ¡åº“" â†’ æ‰¹é‡ä¸Šä¼  + è‡ªåŠ¨åˆ†ç±»
"æ›´æ–°åˆåŒæ¨¡æ¿åˆ°æœ€æ–°ç‰ˆæœ¬" â†’ ç‰ˆæœ¬æ£€æµ‹ + å¢é‡æ›´æ–°
"åˆ æ‰æ‰€æœ‰è¿‡æœŸçš„å†…éƒ¨æ–‡æ¡£" â†’ æ—¶é—´èŒƒå›´æ™ºèƒ½ç­›é€‰åˆ é™¤
```

#### æ™ºèƒ½æ£€ç´¢
```
"ä¸Šå‘¨å¼€ä¼šæåˆ°çš„é‚£ä¸ªå®¢æˆ·æ–¹æ¡ˆåœ¨å“ªï¼Ÿ" â†’ æ—¶é—´ + è¯­ä¹‰è”åˆå®šä½
"å¯¹æ¯”ä¸€ä¸‹æ–°æ—§ä¸¤ç‰ˆçš„æŠ€æœ¯å·®å¼‚" â†’ å¤šæ–‡æ¡£å¯¹æ¯”åˆ†æ
"æ‰¾å‡ºæ‰€æœ‰æ¶‰åŠåˆè§„é£é™©çš„æ®µè½" â†’ è·¨åº“ä¸»é¢˜æ£€ç´¢
```

### 5. å¤šæ¨¡å‹æœåŠ¡å•†æ”¯æŒ

> **ä¸»æ¨æœåŠ¡å•†ï¼šç¡…åŸºæµåŠ¨** - æä¾› LLM å’ŒåµŒå…¥æ¨¡å‹çš„ä¸€ç«™å¼ API æœåŠ¡ï¼Œå›½å†…è®¿é—®å¿«ã€æ€§ä»·æ¯”é«˜ã€‚

#### LLM æ¨¡å‹
| æœåŠ¡å•† | æ¨¡å‹ | ç‰¹ç‚¹ |
|--------|------|------|
| **ç¡…åŸºæµåŠ¨** | Qwen2.5ã€Llama3ã€Gemma2 | **ä¸»æ¨**ï¼Œå›½å†…è®¿é—®å¿«ï¼Œæ€§ä»·æ¯”é«˜ |
| Anthropic | Claude-3-Opus/Sonnet/Haiku | é•¿ä¸Šä¸‹æ–‡ï¼Œæ¨ç†èƒ½åŠ›å¼º |
| DeepSeek | deepseek-chat/coder | å›½äº§æ€§ä»·æ¯”é«˜ï¼Œä»£ç èƒ½åŠ›å¼º |
| OpenAI | GPT-4, GPT-4-Turbo, GPT-3.5 | API ç¨³å®šï¼ˆä¸é¦–é€‰ï¼‰ |
| Google | Gemini-Pro/Ultra | å¤šæ¨¡æ€æ”¯æŒ |
| æœ¬åœ°æ¨¡å‹ | Ollama, LM Studio | éšç§ä¿æŠ¤ï¼Œç¦»çº¿å¯ç”¨ |

#### åµŒå…¥æ¨¡å‹
| æœåŠ¡å•† | æ¨èæ¨¡å‹ | ç»´åº¦ | ç‰¹ç‚¹ |
|--------|----------|------|------|
| **ç¡…åŸºæµåŠ¨** | BAAI/bge-m3 | 1024 | **ä¸»æ¨**ï¼Œå¤šè¯­è¨€æ”¯æŒï¼Œé•¿æ–‡æœ¬ |
| **ç¡…åŸºæµåŠ¨** | BAAI/bge-large-zh-v1.5 | 1024 | ä¸­æ–‡æ•ˆæœä¼˜ç§€ |
| Jina AI | jina-embeddings-v2-base-zh | 768 | é•¿æ–‡æœ¬æ”¯æŒ |
| æœ¬åœ°æ¨¡å‹ | sentence-transformers | å¯å˜ | ç¦»çº¿å¯ç”¨ |

#### é‡æ’åºæ¨¡å‹
- BAAI/bge-reranker-largeï¼ˆä¸­æ–‡æ•ˆæœå¥½ï¼‰
- BAAI/bge-reranker-baseï¼ˆè½»é‡çº§ï¼‰
- Cohere rerankï¼ˆå•†ä¸š APIï¼‰

---

## å‰ç«¯è®¾è®¡å›¾

> **æ³¨æ„**ï¼šå‰ç«¯è®¾è®¡å›¾å¾…è¡¥å……ï¼Œåç»­å°†æ ¹æ®è®¾è®¡å›¾æ„å»ºå‰ç«¯é¡µé¢ã€‚

### é¡µé¢è§„åˆ’

| é¡µé¢ | åŠŸèƒ½ | çŠ¶æ€ |
|------|------|------|
| é¦–é¡µ/èŠå¤©é¡µ | è‡ªç„¶è¯­è¨€å¯¹è¯ã€çŸ¥è¯†åº“æ“ä½œå…¥å£ | å¾…è®¾è®¡ |
| çŸ¥è¯†åº“ç®¡ç† | åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤çŸ¥è¯†åº“ | å¾…è®¾è®¡ |
| æ–‡æ¡£ç®¡ç† | ä¸Šä¼ ã€é¢„è§ˆã€åˆ é™¤æ–‡æ¡£ | å¾…è®¾è®¡ |
| è®¾ç½®é¡µ | LLM/åµŒå…¥æ¨¡å‹/é‡æ’åºæ¨¡å‹é…ç½® | å¾…è®¾è®¡ |

### å¸ƒå±€è§„åˆ’

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header (Logo + å…¨å±€æœç´¢ + ç”¨æˆ·èœå•)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚                                  â”‚
â”‚  Sidebar â”‚        Main Content              â”‚
â”‚  å¯¼èˆª    â”‚        å½“å‰é¡µé¢å†…å®¹               â”‚
â”‚          â”‚                                  â”‚
â”‚  - èŠå¤©  â”‚                                  â”‚
â”‚  - çŸ¥è¯†åº“â”‚                                  â”‚
â”‚  - æ–‡æ¡£  â”‚                                  â”‚
â”‚  - è®¾ç½®  â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è®¾è®¡è¦ç‚¹ï¼ˆå¾…è¡¥å……ï¼‰
- [ ] é…è‰²æ–¹æ¡ˆï¼ˆä¸»è‰²è°ƒã€è¾…åŠ©è‰²ï¼‰
- [ ] ç»„ä»¶æ ·å¼è§„èŒƒ
- [ ] äº¤äº’åŠ¨æ•ˆè®¾è®¡

---

## é¡¹ç›®ç»“æ„

```
RagDocMan/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/          # FastAPI è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ core/         # é…ç½®ã€æ—¥å¿—ã€å·¥å‚æ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ rag/          # RAG æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ models/       # æ•°æ®åº“æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ schemas/      # Pydantic æ¨¡å‹
â”‚   â”‚   â””â”€â”€ services/     # ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ tests/            # åç«¯æµ‹è¯•
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ .env.example
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/   # Vue ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ views/        # é¡µé¢è§†å›¾
â”‚   â”‚   â”œâ”€â”€ stores/       # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ utils/        # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ api/          # API è°ƒç”¨å°è£…
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”œâ”€â”€ desktop/
â”‚   â””â”€â”€ main.py           # PyWebView å…¥å£
â”œâ”€â”€ docs/                 # æ–‡æ¡£
â””â”€â”€ tests/                # E2E æµ‹è¯•
```

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.10+
- Node.js 18+
- 8GB+ RAMï¼ˆæœ¬åœ°æ¨¡å‹éœ€è¦æ›´å¤šï¼‰

### åç«¯å®‰è£…

```bash
cd backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¤åˆ¶ç¯å¢ƒé…ç½®
cp .env.example .env

# ç¼–è¾‘ .env å¡«å…¥ API Key
```

### å‰ç«¯å®‰è£…

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼è¿è¡Œ
npm run dev
```

### æ¡Œé¢ç«¯è¿è¡Œ

```bash
cd desktop

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# è¿è¡Œæ¡Œé¢åº”ç”¨
python main.py
```

---

## API å“åº”æ ¼å¼

æ‰€æœ‰ API æ¥å£ä½¿ç”¨ç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼š

### æˆåŠŸå“åº”
```json
{
  "success": true,
  "data": { ... },
  "message": null
}
```

### é”™è¯¯å“åº”
```json
{
  "success": false,
  "data": null,
  "error": {
    "code": "INVALID_REQUEST",
    "message": "è¯¦ç»†é”™è¯¯æè¿°"
  }
}
```

### åˆ†é¡µå“åº”
```json
{
  "success": true,
  "data": [...],
  "meta": {
    "total": 100,
    "page": 1,
    "limit": 20
  }
}
```

---

## å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼
- **Python**: PEP 8 + Black æ ¼å¼åŒ– + mypy ç±»å‹æ£€æŸ¥
- **TypeScript**: ä¸¥æ ¼æ¨¡å¼ + ESLint + Prettier

### æäº¤è§„èŒƒ
éµå¾ª Conventional Commitsï¼š
- `feat`: æ–°åŠŸèƒ½
- `fix`: Bug ä¿®å¤
- `refactor`: ä»£ç é‡æ„
- `docs`: æ–‡æ¡£æ›´æ–°
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»º/å·¥å…·é…ç½®

### æµ‹è¯•è¦†ç›–ç‡
- æœ€ä½è¦æ±‚ï¼š80%
- æµ‹è¯•ç±»å‹ï¼šå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€E2E æµ‹è¯•

---

## è®¸å¯è¯

MIT License

---

## é¡¹ç›®çŠ¶æ€

ğŸš§ å¼€å‘ä¸­
